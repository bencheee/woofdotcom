{% extends "base.html" %}

{% block content %}
<!-- Banner -->
<section class="banner">
  <img class="banner__img" src="/static/images/banner_post_main.webp" alt="">
  <div class="title-section">
    <h1 class="title-section__title">Posts collection</h1>
    <p class="title-section__text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean bibendum ex nec
      ultrices porta.</p>
  </div>
</section>

<!-- Posts main section -->
<section class="container container--light">
  <p class="filter-toggle js-filter-toggle">
    <i class="fas fa-cogs"></i>
    <span>Filter posts</span>
  </p>

  <form class="form form-toggle js-form-toggle"
    action="{{ url_for('post_main') }}" method="POST">
    <div class="wrapper__row wrapper--filter">
      <select class="form__input form__input--filter" name="category"
        id="category">
        <option value="Select category"
          selected disabled hidden>By category</option>
        {% for category in categories %}
          <option value="{{ category }}">{{ category }}</option>
        {% endfor %}
      </select>

      <select class="form__input form__input--filter" name="author" id="author">
        <option value="Select author"
          selected disabled hidden>By author</option>
        {% for user in users %}
          <option value="{{ user.username }}">{{ user.username }}</option>
        {% endfor %}
      </select>

      <select class="form__input form__input--filter" name="sort" id="sort">
        <option value="Sort by" selected disabled hidden>Sort by</option>
        <option value="New to old">New to old</option>
        <option value="Old to new">Old to new</option>
        <option value="Most popular">Most popular</option>
      </select>
    </div>
    <div class="wrapper__row wrapper--filter">
      <button class="btn btn--invert btn--filter-reset"
        type="reset">Reset</button>
      <button class="btn btn--filter" type="submit">SEARCH</button>
    </div>
  </form>

  <div class="mobile-container">
    {% for post in posts %}
      <div class="card">
        <a href="{{ url_for('post_main', post_id=post._id) }}">
          <div class="card__img img--rounded js-img-mobile" style="background-image: url({{ post.img_path }});" alt="">
          </div>
          <h3 class="card__title">{{ post.title }}</h3>
        </a>
        <p class="card__info">
          <span>
            <span>{{ post.create_date }} </span>by<span> {{ post.author }}</span>
          </span>
          <span>
            <span>Category: </span><span>{{ post.category }}</span>
          </span>
        </p>
        <p class="card__summary">{{ post.summary }}</p>
        <hr class="hr hr--card hr--dark">
      </div>
    {% endfor %}
  </div>
</section>
{% endblock %}